---
import { getAllClusters } from '../lib/clusters';

const clusters = getAllClusters();
const MAIN_SITE = 'https://www.vistaceo.com';

const footerLinks = {
  producto: [
    { label: 'Características', href: `${MAIN_SITE}/#características` },
    { label: 'Precios', href: `${MAIN_SITE}/#precios` },
    { label: 'Blog', href: '/' },
  ],
  temas: clusters.slice(0, 5).map(c => ({ label: c.name, href: `/tema/${c.slug}` })),
  legal: [
    { label: 'Privacidad', href: `${MAIN_SITE}/politicas` },
    { label: 'Términos', href: `${MAIN_SITE}/condiciones` },
  ],
};
---

<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-main">
      <!-- Brand -->
      <div class="footer-brand">
        <a href={MAIN_SITE} class="footer-logo">
          <img src="/logo-light-full.png" alt="VistaCEO" class="logo-light" />
          <img src="/logo-dark-full.png" alt="VistaCEO" class="logo-dark" style="display: none;" />
        </a>
        <p class="footer-tagline">
          Inteligencia artificial para escalar tu negocio.
        </p>
      </div>
      
      <!-- Links -->
      <div class="footer-links-row">
        <div class="footer-links">
          <h4>Producto</h4>
          <ul>
            {footerLinks.producto.map((link) => (
              <li><a href={link.href}>{link.label}</a></li>
            ))}
          </ul>
        </div>
        
        <div class="footer-links">
          <h4>Temas</h4>
          <ul>
            {footerLinks.temas.map((link) => (
              <li><a href={link.href}>{link.label}</a></li>
            ))}
          </ul>
        </div>
        
        <div class="footer-links">
          <h4>Legal</h4>
          <ul>
            {footerLinks.legal.map((link) => (
              <li><a href={link.href}>{link.label}</a></li>
            ))}
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <p>© 2026 VistaCEO. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<script>
  function updateFooterLogos() {
    const isDark = document.documentElement.classList.contains('dark');
    const lightLogos = document.querySelectorAll('.site-footer .logo-light') as NodeListOf<HTMLElement>;
    const darkLogos = document.querySelectorAll('.site-footer .logo-dark') as NodeListOf<HTMLElement>;
    
    lightLogos.forEach(logo => logo.style.display = isDark ? 'none' : 'block');
    darkLogos.forEach(logo => logo.style.display = isDark ? 'block' : 'none');
  }
  
  updateFooterLogos();
  
  const observer = new MutationObserver(updateFooterLogos);
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
</script>

<style>
  .site-footer {
    background: var(--card);
    border-top: 1px solid var(--border);
    padding: 2rem 0 1.5rem;
    margin-top: 3rem;
  }
  
  .footer-container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }
  
  .footer-main {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }
  
  @media (min-width: 768px) {
    .footer-main {
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-start;
    }
  }
  
  .footer-brand {
    max-width: 280px;
  }
  
  .footer-logo {
    display: inline-flex;
    margin-bottom: 0.75rem;
    text-decoration: none;
  }
  
  .footer-logo img {
    height: 24px;
    width: auto;
  }
  
  .footer-tagline {
    color: var(--foreground-muted);
    font-size: 0.85rem;
    line-height: 1.5;
    margin: 0;
  }
  
  .footer-links-row {
    display: flex;
    gap: 3rem;
  }
  
  .footer-links h4 {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 0.75rem;
    color: var(--foreground);
  }
  
  .footer-links ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .footer-links li {
    margin-bottom: 0.5rem;
  }
  
  .footer-links a {
    color: var(--foreground-muted);
    font-size: 0.8rem;
    text-decoration: none;
    transition: color 0.15s;
  }
  
  .footer-links a:hover {
    color: var(--primary);
  }
  
  .footer-bottom {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border);
    text-align: center;
  }
  
  .footer-bottom p {
    color: var(--muted-foreground);
    font-size: 0.8rem;
    margin: 0;
  }
</style>
