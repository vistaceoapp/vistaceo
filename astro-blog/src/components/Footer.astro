---
import { getAllClusters } from '../lib/clusters';

const clusters = getAllClusters();
const currentYear = new Date().getFullYear();
---

<footer class="site-footer">
  <div class="footer-container">
    <div class="footer-grid">
      <!-- Brand Column -->
      <div class="footer-brand">
        <a href="/" class="footer-logo">
          <img src="/logo-light-full.png" alt="VistaCEO" class="logo-light" />
          <img src="/logo-dark-full.png" alt="VistaCEO" class="logo-dark" style="display: none;" />
        </a>
        <p class="footer-tagline">
          Tu fuente de insights para tomar mejores decisiones de negocio en Latinoamérica.
        </p>
        <a href="https://www.vistaceo.com" class="footer-cta" target="_blank" rel="noopener">
          Conocer VistaCEO
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </a>
      </div>
      
      <!-- Topics Column 1 -->
      <div class="footer-links">
        <h4>Temas</h4>
        <ul>
          {clusters.slice(0, 6).map((cluster) => (
            <li>
              <a href={`/tema/${cluster.slug}`}>
                {cluster.emoji} {cluster.name}
              </a>
            </li>
          ))}
        </ul>
      </div>
      
      <!-- Topics Column 2 -->
      <div class="footer-links">
        <h4>Más Temas</h4>
        <ul>
          {clusters.slice(6).map((cluster) => (
            <li>
              <a href={`/tema/${cluster.slug}`}>
                {cluster.emoji} {cluster.name}
              </a>
            </li>
          ))}
        </ul>
      </div>
      
      <!-- Company Column -->
      <div class="footer-links">
        <h4>VistaCEO</h4>
        <ul>
          <li><a href="https://www.vistaceo.com" target="_blank" rel="noopener">Aplicación</a></li>
          <li><a href="https://www.vistaceo.com/#precios" target="_blank" rel="noopener">Precios</a></li>
          <li><a href="https://www.vistaceo.com/#faq" target="_blank" rel="noopener">FAQ</a></li>
          <li><a href="/rss.xml">RSS Feed</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>© {currentYear} VistaCEO. Todos los derechos reservados.</p>
    </div>
  </div>
</footer>

<script>
  // Update footer logos based on theme
  function updateFooterLogos() {
    const isDark = document.documentElement.classList.contains('dark');
    const lightLogos = document.querySelectorAll('.site-footer .logo-light') as NodeListOf<HTMLElement>;
    const darkLogos = document.querySelectorAll('.site-footer .logo-dark') as NodeListOf<HTMLElement>;
    
    lightLogos.forEach(logo => logo.style.display = isDark ? 'none' : 'block');
    darkLogos.forEach(logo => logo.style.display = isDark ? 'block' : 'none');
  }
  
  // Initial update
  updateFooterLogos();
  
  // Watch for theme changes
  const observer = new MutationObserver(updateFooterLogos);
  observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
</script>
